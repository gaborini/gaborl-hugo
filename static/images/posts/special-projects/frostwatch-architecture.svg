<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="820" viewBox="0 0 1400 820">
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#0b1220"/>
      <stop offset="100%" stop-color="#1b2a4a"/>
    </linearGradient>
    <style>
      .title{font:700 42px 'Segoe UI',Arial,sans-serif;fill:#f8fbff}
      .label{font:600 22px 'Segoe UI',Arial,sans-serif;fill:#dbe7ff}
      .small{font:500 18px 'Segoe UI',Arial,sans-serif;fill:#b7c8ef}
      .box{fill:#13233f;stroke:#7ea4ff;stroke-width:2.5;rx:16}
      .line{stroke:#9bc1ff;stroke-width:4;marker-end:url(#arrow)}
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#9bc1ff"/>
    </marker>
  </defs>
  <rect width="1400" height="820" fill="url(#bg)"/>
  <text x="70" y="80" class="title">Frostwatch Architecture: Solar LoRa Frost Alert Network</text>

  <rect x="70" y="140" width="330" height="170" class="box"/>
  <text x="95" y="190" class="label">Field Node (ESP32 + LoRa)</text>
  <text x="95" y="225" class="small">- Air temp and humidity probe</text>
  <text x="95" y="255" class="small">- Soil temperature probe</text>
  <text x="95" y="285" class="small">- Battery and panel telemetry</text>

  <rect x="70" y="380" width="330" height="170" class="box"/>
  <text x="95" y="430" class="label">Field Node (Arduino MKR WAN)</text>
  <text x="95" y="465" class="small">- Wind speed and direction</text>
  <text x="95" y="495" class="small">- Dew point local compute</text>
  <text x="95" y="525" class="small">- Buffered offline queue</text>

  <rect x="530" y="250" width="340" height="210" class="box"/>
  <text x="555" y="300" class="label">Gateway (Raspberry Pi 5)</text>
  <text x="555" y="335" class="small">- LoRa concentrator + packet forwarder</text>
  <text x="555" y="365" class="small">- Rust ingest service (MQTT bridge)</text>
  <text x="555" y="395" class="small">- Local TSDB cache for outages</text>
  <text x="555" y="425" class="small">- SMS fallback alert worker</text>

  <rect x="1010" y="170" width="320" height="170" class="box"/>
  <text x="1035" y="220" class="label">Cloud API (Rust/Axum)</text>
  <text x="1035" y="255" class="small">- Device auth</text>
  <text x="1035" y="285" class="small">- Telemetry validation</text>
  <text x="1035" y="315" class="small">- Event fan-out</text>

  <rect x="1010" y="420" width="320" height="170" class="box"/>
  <text x="1035" y="470" class="label">Dashboard + Alerting</text>
  <text x="1035" y="505" class="small">- Risk map by vineyard row</text>
  <text x="1035" y="535" class="small">- Threshold and trend alerts</text>
  <text x="1035" y="565" class="small">- Freeze mitigation timeline</text>

  <line x1="400" y1="225" x2="530" y2="300" class="line"/>
  <line x1="400" y1="465" x2="530" y2="390" class="line"/>
  <line x1="870" y1="320" x2="1010" y2="250" class="line"/>
  <line x1="870" y1="380" x2="1010" y2="505" class="line"/>

  <text x="70" y="770" class="small">LoRaWAN uplink every 90s, emergency mode every 20s under frost risk score > 0.75.</text>
</svg>
